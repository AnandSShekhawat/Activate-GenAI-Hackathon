# Challenge 4: Implement Monitoring and Logging of Azure OpenAI using API Management Service

## Introduction

This challenge requires a deep dive into the oversight of the Azure OpenAI Service. It entails utilizing the Log Analytics workspace to thoroughly monitor system performance and behavior. Additionally, it involves harnessing the capabilities of Azure API Management to ensure effective management and optimization of the service.

## Description

In this particular challenge, your responsibilities will cover a series of actions. To start, you'll configure diagnostic settings, ensuring the system is adequately prepared for effective monitoring. Then, you'll move on to deploying an OpenAI model, a crucial step in implementing AI capabilities. Following this, your focus will shift to analyzing logs utilizing Kusto Queries, allowing for in-depth insights into system performance and behavior. Finally, you'll take on the task of monitoring OpenAI prompts, a pivotal aspect that involves leveraging the combined functionalities of Azure API Management and Log Analytics workspace to ensure the system's smooth and efficient operation.

### Accessing Azure portal

1. To access the Azure portal, open a private/incognito window in your browser and navigate to Azure Portal.

1. On the **Sign in to Microsoft Azure tab** you will see a login screen, enter the following email/username and then click on **Next**.

   - **Email/Username:** <inject key="AzureAdUserEmail"></inject>

1. Now enter the following password and click on **Sign in**.

   - **Password:** <inject key="AzureAdUserPassword"></inject>

1. If you see the pop-up **Stay Signed in?**, click No.

1. If you see the pop-up **You have free Azure Advisor recommendations!**, close the window to continue the lab.

1. If a **Welcome to Microsoft Azure** popup window appears, click **Maybe Later** to skip the tour.

## Challenge Objectives:

1. **Monitoring Azure OpenAI Service using Kusto query:**
   - Observing the Azure OpenAI Service entails configuring diagnostic settings, deploying an OpenAI model via Azure OpenAI and analyzing the logs using Kusto Queries.

2. **Monitoring OpenAI prompts using Azure API Management:**
   - Supervising OpenAI prompts through Azure API Management involves configuring Azure API Management, testing the API to generate completions for chat messages, and analyzing OpenAI logs using Kusto Queries within the API Management Service.
  
## Success Criteria:

Participants will be evaluated based on the following criteria:

1. The OpenAI service with the model deployment succeeded, and the analysis of logs using Kusto Queries proceeded as expected.
2. The Azure API Management creation and configuration, as well as the analysis of logs using Kusto Queries within the API Management Service, occurred as expected.

## Summary

During this challenge, you've investigated and acquired insights into monitoring the Azure OpenAI Service through various methods.
