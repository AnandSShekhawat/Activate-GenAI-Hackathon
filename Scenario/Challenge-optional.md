# Optional Challenge: Implement Monitoring and Logging of Azure OpenAI using API Management Service

## Introduction:

In this challenge, you will delve into the intricacies by utilizing the Log Analytics workspace for comprehensive system monitoring and analyzing performance. The process will commence by creating and configuring an existing OpenAI service with diagnostic settings, facilitating log retrieval through Kusto queries. On the other hand, an API management service will be established, incorporating essential named values, backend configurations, and API settings. This service will be connected with diagnostic settings, enabling Azure Monitor. The subsequent step will involve analyzing logs within the API management service using Kusto queries to ensure effective monitoring and seamless integration with the OpenAI service. The focus will be on observing outputs and prompts to guarantee a well-integrated and monitored system.

## Challenge Objectives:

1. **Monitoring Azure OpenAI Service using Kusto query:**
   - Utilize the Azure OpenAI service by ensuring the diagonistic settings are configured and an OpenAI model is deployed.
   - Perform log analysis using Kusto Queries.
     
2. **Monitoring OpenAI prompts using Azure API Management:**
   - Configure Azure API Management by ensuring seamless chat message completions by navigating through the nuances of API testing.
   - Utilize the robust capabilities of Kusto queries within the API Management Service for advanced log analysis and in-depth examination of the queries generated.
  
## Success Criteria:

Participants will be evaluated based on the following criteria:

1. Verify the OpenAI service, ensuring the model deployment is successful, and analyze logs using Kusto Queries as planned.
2. Ensure Azure API management is created and configured ,resulting in the visibility of logs and openAI prompts using Kusto Queries.

## Additional Resources:

- Refer to the [how to configure Azure API Management Service](https://github.com/Azure-Samples/openai-python-enterprise-logging/blob/main/README.md) for detailed information.
- Refer to this video about [Log & Monitor Everything in Azure OpenAI with API Management Service](https://github.com/Azure-Samples/openai-python-enterprise-logging/blob/main/README.md).
- Refer to the [Kusto Queries Tutorial](https://learn.microsoft.com/en-us/azure/azure-monitor/logs/log-analytics-tutorial) for detailed information
